{"openapi":"3.0.0","paths":{"/categories":{"get":{"operationId":"CategoriesController_getCategories","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CategoryResponseDto"}}}}}},"summary":"Get all categories","tags":["categories"]},"post":{"operationId":"CategoriesController_saveCategory","parameters":[],"requestBody":{"required":true,"description":"Data for creating a category","content":{"application/json":{"schema":{"properties":{"name":{"type":"string"}},"$ref":"#/components/schemas/CreateCategoryDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveCategoryResponseDto"}}}},"401":{"description":""}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Create a new category","tags":["categories"]}},"/categories/{id}":{"get":{"operationId":"CategoriesController_getCategory","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the category","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryResponseDto"}}}},"404":{"description":"Category not found."}},"summary":"Get a category by ID","tags":["categories"]},"put":{"operationId":"CategoriesController_updateCategory","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the category to update","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Data for updating the category","content":{"application/json":{"schema":{"properties":{"name":{"type":"string"}},"$ref":"#/components/schemas/CreateCategoryDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateCategoryResponse"}}}},"401":{"description":""},"404":{"description":"Category not found."}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Update an existing category","tags":["categories"]},"delete":{"operationId":"CategoriesController_deleteCategory","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the category to delete","schema":{"type":"string"}}],"responses":{"200":{"description":"Category deleted successfully.","content":{"application/json":{"schema":{"example":{"success":true,"deletedId":"uuid"}}}}},"401":{"description":""},"404":{"description":"Category not found."}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Delete a category","tags":["categories"]}},"/products":{"get":{"operationId":"ProductsController_getProducts","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ProductResponseDto"}}}}}},"summary":"Get all available products","tags":["products"]},"post":{"operationId":"ProductsController_saveProduct","parameters":[],"requestBody":{"required":true,"description":"Data for creating a product","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SaveProductDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponseDto"}}}},"400":{"description":"Bad Request"},"401":{"description":""}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Create a new product","tags":["products"]}},"/products/{id}":{"get":{"operationId":"ProductsController_getProduct","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the product","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponseDto"}}}},"404":{"description":"Product not found."}},"summary":"Get a product by ID","tags":["products"]},"put":{"operationId":"ProductsController_updateProduct","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the product to update","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Data for updating the product","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProductResponse"}}}},"400":{"description":"Bad Request"},"401":{"description":""},"404":{"description":"Product not found."}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Update an existing product","tags":["products"]},"delete":{"operationId":"ProductsController_deleteProduct","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the product to delete","schema":{"type":"string"}}],"responses":{"200":{"description":"Product deleted successfully.","content":{"application/json":{"schema":{"example":{"success":true,"deletedId":"uuid"}}}}},"401":{"description":""},"404":{"description":"Product not found."}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Delete a product","tags":["products"]}},"/products/slug/{slug}":{"get":{"operationId":"ProductsController_getProductBySlug","parameters":[{"name":"slug","required":true,"in":"path","description":"Slug of the product","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductResponseDto"}}}},"404":{"description":"Product not found."}},"summary":"Get a product by slug","tags":["products"]}},"/products/seeder":{"post":{"operationId":"ProductsController_addProducts","parameters":[],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoadProductsResponseDto"}}}},"500":{"description":"Internal server error."}},"summary":"Load products from seeder","tags":["products"]}},"/users":{"get":{"operationId":"UsersController_getUsers","parameters":[{"name":"page","required":false,"in":"query","description":"Page number for pagination","schema":{"type":"number"}},{"name":"limit","required":false,"in":"query","description":"Number of items per page","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedUsersResponseDto"}}}},"401":{"description":""}},"security":[{"bearer":[]},{"bearer":[]}],"summary":"Get a list of users","tags":["users"]}},"/users/{id}":{"get":{"operationId":"UsersController_getUser","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the user","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserResponseDto"}}}},"401":{"description":"Unauthorized."},"404":{"description":"User not found."}},"security":[{"bearer":[]}],"summary":"Get a user by ID","tags":["users"]},"put":{"operationId":"UsersController_updateUser","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the user to update","schema":{"type":"string"}}],"requestBody":{"required":true,"description":"Data for updating the user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserResponse"}}}},"400":{"description":"Bad Request."},"401":{"description":"Unauthorized."},"404":{"description":"User not found."}},"security":[{"bearer":[]}],"summary":"Update an existing user","tags":["users"]},"delete":{"operationId":"UsersController_deleteUser","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the user to delete","schema":{"type":"string"}}],"responses":{"200":{"description":"User deleted successfully.","content":{"application/json":{"schema":{"example":{"success":true,"deletedId":"uuid"}}}}},"400":{"description":"Bad Request."},"401":{"description":"Unauthorized."},"404":{"description":"User not found."}},"security":[{"bearer":[]}],"summary":"Delete a user","tags":["users"]}},"/orders/{id}":{"get":{"operationId":"OrdersController_getOrder","parameters":[{"name":"id","required":true,"in":"path","description":"ID of the order","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderEntity"}}}},"401":{"description":"Unauthorized."},"404":{"description":"User not found."}},"security":[{"bearer":[]}],"summary":"Get a order by ID","tags":["orders"]}},"/orders":{"post":{"operationId":"OrdersController_addOrder","parameters":[],"requestBody":{"required":true,"description":"Data for creating a order","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddOrderDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddOrderResponseDto"}}}},"400":{"description":"These products are not available."},"401":{"description":"Unauthorized."},"404":{"description":"User not found."},"500":{"description":"There was an error processing the order. Try again later."}},"summary":"Create a order","tags":["orders"]}},"/stripe/create-payment-session":{"post":{"operationId":"StripeController_createPaymentSession","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePaymentSessionDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}},"tags":["Stripe"]}},"/stripe/get-session-details/{session_id}":{"get":{"operationId":"StripeController_getSessionDetails","parameters":[{"name":"session_id","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}},"tags":["Stripe"]}},"/stripe/webhook":{"post":{"operationId":"StripeController_webhook","parameters":[],"responses":{"201":{"description":""}},"tags":["Stripe"]}},"/auth/sign-up":{"post":{"operationId":"AuthController_signUp","parameters":[],"requestBody":{"required":true,"description":"Data for creating a new user","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpResponseDto"}}}},"400":{"description":"Bad request."}},"summary":"Register a new user","tags":["auth"]}},"/auth/sign-in":{"post":{"operationId":"AuthController_signIn","parameters":[],"requestBody":{"required":true,"description":"User credentials for authentication","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignInResponseDto"}}}},"401":{"description":"Unauthorized."}},"summary":"Authenticate a user","tags":["auth"]}}},"info":{"title":"NestJS e-commerce API","description":"API builded with NestJS to be used for online stores.","version":"1.0","contact":{}},"tags":[],"servers":[],"components":{"schemas":{"ProductResponseDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Product ID"},"name":{"type":"string","description":"Product name","example":"Smartphone X"},"description":{"type":"string","description":"Product description","example":"A high-end smartphone with advanced features."},"slug":{"type":"string","description":"Product slug","example":"smartphone-x"},"price":{"type":"number","description":"Product price","example":599.99},"stock":{"type":"number","description":"Available stock","example":100},"imgUrl":{"type":"string","description":"Product image URL","example":"https://example.com/images/smartphone-x.jpg"},"categoryId":{"type":"string","format":"uuid","description":"ID of the category to which the product belongs"}},"required":["id","name","description","slug","price","stock","imgUrl","categoryId"]},"CategoryResponseDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Category ID"},"name":{"type":"string","description":"Category name.","example":"Smartphones"},"products":{"type":"array","items":{"$ref":"#/components/schemas/ProductResponseDto"}}},"required":["id","name","products"]},"CreateCategoryDto":{"type":"object","properties":{"name":{"type":"string","maxLength":50,"description":"The category's name.","example":"Smartphones"}},"required":["name"]},"SaveCategoryResponseDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"Category ID"},"name":{"type":"string","description":"Category name.","example":"Smartphones"}},"required":["id","name"]},"UpdateCategoryResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Indicates if the operation was successful"},"category":{"description":"The updated product","allOf":[{"$ref":"#/components/schemas/SaveCategoryResponseDto"}]}},"required":["success","category"]},"SaveProductDto":{"type":"object","properties":{"name":{"type":"string","maxLength":50,"description":"The name of the product","example":"Smartphone X"},"description":{"type":"string","maxLength":255,"description":"The description of the product","example":"A high-end smartphone with advanced features."},"price":{"type":"number","minimum":0,"description":"The price of the product. Must be a decimal number with up to 2 decimal places.","example":599.99},"stock":{"type":"number","description":"The stock quantity of the product","example":100},"imgUrl":{"type":"string","maxLength":255,"description":"The URL of the product image","example":"https://example.com/images/smartphone-x.jpg"},"categoryId":{"type":"string","format":"uuid","description":"ID of the category to which the product belongs"}},"required":["name","description","price","stock","imgUrl","categoryId"]},"UpdateProductDto":{"type":"object","properties":{"name":{"type":"string","description":"The name of the product","example":"Smartphone X"},"description":{"type":"string","description":"The description of the product","example":"A high-end smartphone with advanced features."},"price":{"type":"number","description":"The price of the product. Must be a decimal number with up to 2 decimal places.","example":599.99},"stock":{"type":"number","description":"The stock quantity of the product","example":100},"imgUrl":{"type":"string","description":"The URL of the product image","example":"https://example.com/images/smartphone-x.jpg"},"categoryId":{"type":"string","description":"ID of the category to which the product belongs"}}},"UpdateProductResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Indicates if the operation was successful"},"product":{"description":"The updated product","allOf":[{"$ref":"#/components/schemas/ProductResponseDto"}]}},"required":["success","product"]},"LoadProductsResponseDto":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Indicates if the operation was successful"},"products":{"description":"The loaded products from the seed","type":"array","items":{"$ref":"#/components/schemas/ProductResponseDto"}}},"required":["success","products"]},"UserResponseDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"User UUID"},"name":{"type":"string","description":"User full name","example":"John Doe"},"email":{"type":"string","description":"User email address","example":"john.doe@example.com"},"phone":{"type":"number","description":"User phone number","example":1234567890},"country":{"type":"string","description":"User country","example":"United States"},"address":{"type":"string","description":"User address","example":"123 Main St, Springfield"},"city":{"type":"string","description":"User city","example":"Springfield"},"isAdmin":{"type":"boolean","description":"Indicates if the user is an administrator","example":false}},"required":["id","name","email","isAdmin"]},"PaginatedUsersResponseDto":{"type":"object","properties":{"users":{"description":"List of users","type":"array","items":{"$ref":"#/components/schemas/UserResponseDto"}},"page":{"type":"number","description":"Current page number","example":1},"limit":{"type":"number","description":"Number of items per page","example":10}},"required":["users","page","limit"]},"UpdateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"The full name of the user","example":"John Doe"},"email":{"type":"string","description":"The email address of the user","example":"john.doe@example.com"},"address":{"type":"string","description":"The address of the user","example":"123 Main St"},"phone":{"type":"number","description":"The phone number of the user","example":1234567890},"country":{"type":"string","description":"The country of residence of the user","example":"United States"},"city":{"type":"string","description":"The city of residence of the user","example":"New York"},"admin":{"type":"boolean","description":"Indicates if the user is an administrator","example":false}}},"UpdateUserResponse":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Indicates if the operation was successful"},"user":{"description":"The updated user","allOf":[{"$ref":"#/components/schemas/UserResponseDto"}]}},"required":["success","user"]},"CartItemEntity":{"type":"object","properties":{"id":{"type":"string"},"title":{"type":"string"},"slug":{"type":"string"},"price":{"type":"number"},"image":{"type":"string"},"quantity":{"type":"number"},"order":{"$ref":"#/components/schemas/OrderEntity"},"orderId":{"type":"string"}},"required":["id","title","slug","price","image","quantity","order","orderId"]},"OrderEntity":{"type":"object","properties":{"id":{"type":"string","default":"22c3eb36-5083-46da-8ac8-e3150daa2692"},"chargeId":{"type":"string"},"payment_intent":{"type":"string"},"receipt_url":{"type":"string"},"refunded":{"type":"boolean"},"status":{"type":"string"},"amount_captured":{"type":"number"},"currency":{"type":"string"},"createdAt":{"format":"date-time","type":"string"},"user":{"$ref":"#/components/schemas/UserEntity"},"userId":{"type":"string"},"cartItems":{"type":"array","items":{"$ref":"#/components/schemas/CartItemEntity"}}},"required":["id","chargeId","payment_intent","receipt_url","refunded","status","amount_captured","currency","createdAt","user","userId","cartItems"]},"UserEntity":{"type":"object","properties":{"id":{"type":"string","default":"7c692708-26d4-417d-9bf7-a66957d276df"},"name":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"phone":{"type":"number"},"country":{"type":"string"},"address":{"type":"string"},"city":{"type":"string"},"isAdmin":{"type":"boolean"},"orders":{"type":"array","items":{"$ref":"#/components/schemas/OrderEntity"}}},"required":["id","name","email","password","isAdmin","orders"]},"CartItemDTO":{"type":"object","properties":{"id":{"type":"string","description":"ID of the cart item","example":1},"title":{"type":"string","description":"Title of the product in the cart","example":"Product A"},"slug":{"type":"string","description":"Slug of the product in the cart","example":"product-a"},"price":{"type":"number","description":"Price of the product in the cart","example":29.99},"image":{"type":"string","description":"Image URL of the product in the cart","example":"https://example.com/product-a.jpg"},"quantity":{"type":"number","description":"Quantity of the product in the cart","example":2}},"required":["id","title","slug","price","image","quantity"]},"AddOrderDto":{"type":"object","properties":{"chargeId":{"type":"string","description":"Charge ID from the payment gateway","example":"ch_1A2b3C4d5E6f7G8h9I0j"},"payment_intent":{"type":"string","description":"Payment intent ID from the payment gateway","example":"pi_1A2b3C4d5E6f7G8h9I0j"},"receipt_url":{"type":"string","description":"Receipt URL from the payment gateway","example":"https://example.com/receipt"},"refunded":{"type":"boolean","description":"Whether the order has been refunded","example":false},"status":{"type":"string","description":"Status of the order","example":"succeeded"},"amount_captured":{"type":"number","description":"Amount captured in the order","example":100},"currency":{"type":"string","description":"Currency of the order","example":"usd"},"userId":{"type":"string","format":"uuid","description":"UUID of the user who placed the order","example":"123e4567-e89b-12d3-a456-426614174000"},"cartItems":{"description":"List of cart items in the order","type":"array","items":{"$ref":"#/components/schemas/CartItemDTO"}}},"required":["chargeId","payment_intent","receipt_url","refunded","status","amount_captured","currency","userId","cartItems"]},"OrderResponseDto":{"type":"object","properties":{"chargeId":{"type":"string","description":"Charge ID from the payment gateway","example":"ch_1A2b3C4d5E6f7G8h9I0j"},"payment_intent":{"type":"string","description":"Payment intent ID from the payment gateway","example":"pi_1A2b3C4d5E6f7G8h9I0j"},"receipt_url":{"type":"string","description":"Receipt URL from the payment gateway","example":"https://example.com/receipt"},"refunded":{"type":"boolean","description":"Whether the order has been refunded","example":false},"status":{"type":"string","description":"Status of the order","example":"succeeded"},"amount_captured":{"type":"number","description":"Amount captured in the order","example":100},"currency":{"type":"string","description":"Currency of the order","example":"usd"},"userId":{"type":"string","format":"uuid","description":"UUID of the user who placed the order","example":"123e4567-e89b-12d3-a456-426614174000"},"cartItems":{"description":"List of cart items in the order","type":"array","items":{"$ref":"#/components/schemas/CartItemDTO"}},"id":{"type":"string","format":"uuid","description":"Order UUID"}},"required":["chargeId","payment_intent","receipt_url","refunded","status","amount_captured","currency","userId","cartItems","id"]},"AddOrderResponseDto":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Indicates if the operation was successful"},"order":{"$ref":"#/components/schemas/OrderResponseDto"}},"required":["success","order"]},"Products":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"quantity":{"type":"number"}},"required":["id","quantity"]},"CreatePaymentSessionDto":{"type":"object","properties":{"userId":{"type":"string","format":"uuid","description":"The UUID of the user who is making the order."},"token":{"type":"string","description":"The Bearer Token of the user."},"products":{"description":"An array of the products ID's of the current order.","type":"array","items":{"$ref":"#/components/schemas/Products"}}},"required":["userId","token","products"]},"CreateUserDto":{"type":"object","properties":{"name":{"type":"string","minLength":3,"maxLength":80,"description":"The full name of the user","example":"John Doe"},"email":{"type":"string","format":"email","description":"The email address of the user","example":"john.doe@example.com"},"password":{"type":"string","minLength":8,"maxLength":15,"pattern":"/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*])/","description":"The password for the user account. It must contain at least one lowercase letter, one uppercase letter, one number, and one special character.","example":"Password123!"},"confirmPassword":{"type":"string","minLength":8,"maxLength":15,"pattern":"/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*])/","description":"The confirmation of the password. It must match the password field.","example":"Password123!"},"address":{"type":"string","minLength":3,"maxLength":80,"description":"The address of the user (optional)","example":"123 Main St"},"phone":{"type":"number","description":"The phone number of the user (optional)","example":1234567890},"country":{"type":"string","minLength":5,"maxLength":20,"description":"The country of residence of the user (optional)","example":"United States"},"city":{"type":"string","minLength":5,"maxLength":20,"description":"The city of residence of the user (optional)","example":"New York"}},"required":["name","email","password","confirmPassword"]},"NewUserResponseDto":{"type":"object","properties":{"id":{"type":"string","format":"uuid","description":"User UUID"},"name":{"type":"string","description":"User full name","example":"John Doe"},"email":{"type":"string","description":"User email address","example":"john.doe@example.com"},"phone":{"type":"number","description":"User phone number","example":1234567890},"country":{"type":"string","description":"User country","example":"United States"},"address":{"type":"string","description":"User address","example":"123 Main St, Springfield"},"city":{"type":"string","description":"User city","example":"Springfield"},"isAdmin":{"type":"boolean","description":"Indicates if the user is an administrator","example":false}},"required":["id","name","email","isAdmin"]},"SignUpResponseDto":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Indicates if the operation was successful"},"user":{"description":"The created user","allOf":[{"$ref":"#/components/schemas/NewUserResponseDto"}]}},"required":["success","user"]},"LoginUserDto":{"type":"object","properties":{"email":{"type":"string","format":"email"},"password":{"type":"string","minLength":8,"maxLength":15,"pattern":"/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[!@#$%^&*])/"}},"required":["email","password"]},"SignInResponseDto":{"type":"object","properties":{"success":{"type":"boolean","example":true,"description":"Indicates if the operation was successful"},"token":{"type":"string","description":"The JWT Token of the user"}},"required":["success","token"]}}}}